<%= form_with(model: survey, local: true) do |form| %>
  <% if survey.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(survey.errors.count, "error") %> prohibited this survey from being saved:</h2>

      <ul>
        <% survey.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field" data-controller="work">
    <label>
      <input type="checkbox" data-action="work#outsideChange" data-target="work.outside"> I work or attend school outside my home
    </label>
    <div class="field details" data-target="work.outsideDetails" style="display:none;">
      <label><input type="checkbox" value="mask" name="mask"> I wear a mask 100% of the time</label>
      <input type="text" placeholder="optionally share more details here">
    </div>
  </div>

  <div class="field" data-controller="work">
    <label>
      <input type="checkbox" data-action="work#outsideChange" data-target="work.outside"> I shop indoors for groceries and other items
    </label>
    <div class="field details" data-target="work.outsideDetails" style="display:none;">
      <label><input type="checkbox" value="mask" name="mask"> I wear a mask 100% of the time</label>
      <input type="text" placeholder="optionally share more details here">
    </div>
  </div>

  <div class="field" data-controller="work">
    <label>
      <input type="checkbox" data-action="work#outsideChange" data-target="work.outside"> I eat at restauraunts
    </label>
    <div class="field details" data-target="work.outsideDetails" style="display:none;">
      <label><input type="checkbox" value="mask" name="mask"> I wear a mask 100% when away from my table</label>
      <input type="text" placeholder="optionally share more details here">
    </div>
  </div>

  <!-- <p><input type="checkbox"> Do you have allergies?</p>
  <p><input type="checkbox"> Do you hang out with other people?</p>

  <p><input type="checkbox"> Do you do curbside pickup?</p>

  <p><input type="checkbox"> Do you go out in public places?</p> -->


  <div class="field" data-controller="occupants">
    <label>How many people do you live with?</label>
    <input type="number" min="0" max="20" value="0" id="occupants-number" data-target="occupants.number" data-action="occupants#updateNumber">
    <input type="range" min="0" max="10" value="0" id="occupants-slider" data-target="occupants.slider" data-action="input->occupants#slide">
  </div>

  <ol id="housemates">
  </ol>

  <template id="housemateTemplate">
    <li class="housemate">
      activites outside the home:
      <div class="details" style="margin:0;margin-bottom:1em;">
        <label>
          <input type="checkbox" data-action="work#outsideChange" data-target="work.outside"> work or attend school
        </label>
        <label>
          <input type="checkbox" data-action="work#outsideChange" data-target="work.outside"> shop or restauraunts
        </label>
        <input type="text" placeholder="more details on this person">
      </div>
    </li>
  </template>

  <div class="actions">
    <%= form.submit 'Save and Share' %>
  </div>





<% end %>
